/*!
* Tim
*   github.com/premasagar/tim
*
*//*
    An extensible JavaScript micro-templating library.
*//*

    by Premasagar Rose
        dharmafly.com

    license
        opensource.org/licenses/mit-license.php

    **

    creates global object
        tim

    **

    v0.5.0

*/
(function(a){var b=function(){function b(a){return toString.call(a)==="[object Array]"}function c(b,c,d){return a.slice.call(b,c,d)}function d(a){var b=1,c=arguments.length,e,f;if(c===1)return d(this,a);for(;b<c;b++){e=arguments[b];if(e)for(f in e)e.hasOwnProperty(f)&&(a[f]=e[f])}return a}function e(a){var b,c,d;if(typeof a!="object")this.settings={};else{this.settings=a,a.fn&&(this.fn=a.fn),a.priority&&(this.priority=a.priority),a.context&&(this.context=a.context),b=a.match,c=typeof b;if(c!=="undefined"){this.match=b;if(b.test)d=this._isRegexMatch,c="regexp";else if(c==="function")d=this._isFunctionMatch;else if(c==="string"||c==="number")d=this._isEqualMatch;d&&(this.isMatch=d),this.matchType=c}}}function f(a){a&&this.add.apply(this,arguments)}"use strict";var a=[];return e.prototype={priority:0,match:!0,isMatch:function(){return!!this.match},_isRegexMatch:function(a){return this.match.test(a)},_isFunctionMatch:function(){return this.match.apply(this,arguments)},_isEqualMatch:function(a){return a===this.match},exec:function(){return this.fn.apply(this.context||this,arguments)}},f.prototype=d([],{types:null,autosort:!0,parseRegex:!0,toArray:function(){return c(this)},push:function(){return a.push.apply(this,arguments),this},slice:function(){var b=a.slice.apply(this,arguments);return new f(b)},create:function(a){return typeof a=="function"&&(a={fn:a}),new e(a)},add:function(){var b=a.concat.apply([],arguments),c,d=0,f=b.length;for(;d<f;d++)c=b[d],this.push(c instanceof e?c:this.create(c));return this.autosort?this.sort():this},remove:function(a){var b=typeof a=="number"?a:this.indexOf(a);return b>=0&&this.splice(b,1),this},indexOf:function(a){var b=this.length,c=0;if(a instanceof e){for(;c<b;c++)if(a===this[c])return c}else if(typeof a=="function")for(;c<b;c++)if(a===this[c].fn)return c;return-1},getBy:function(a,b){var c=this.length,d=0,e;for(;d<c;d++){e=this[d];if(typeof e[a]!="undefined")if(typeof b=="undefined"){if(e[a]===b)return e}else if(e[a]===b)return e}return null},filter:function(a,b){var c=this.length,d=new f,e=0;if(b)for(;e<c;e++)this[e].isMatch(a)||d.push(this[e]);else for(;e<c;e++)this[e].isMatch(a)&&d.push(this[e]);return d},sort:function(){function b(a,b){return a.priority-b.priority}return function(c){return a.sort.call(this,c||b),this}}(),exec:function(){var a=0,b=this.length,c;for(;a<b;a++)c=this[a],c.exec.apply(c,arguments);return this},trigger:function(){return this.exec.apply(this,arguments)},transform:function(a){function m(){h=i.fn.apply(i.context||i,d),typeof h!="undefined"&&a!==h&&(a=d[0]=h)}var b={},d=c(arguments).concat(b),e=this.parseRegex,f=0,g=this.length,h,i,j,k,l;for(;f<g;f++){i=this[f];if(i.isMatch.apply(i,d))if(i.matchType==="regexp"&&e){k=i.match,k.lastIndex=0;while(j=k.exec(a))j&&(j.lastIndex=k.lastIndex),d=d.slice(0,-1).concat({matches:j}),m();k.lastIndex=0}else m()}return a},type:function(a,b){var d=this.types,e=d&&d[a];return b?(e||(d||(d=this.types={}),e=d[a]=new f),e.add.apply(e,c(arguments,1)),this):e}}),d(f,{extend:d,isArray:b,toArray:c})}(),c=function(a){function b(a){return function(b,c,d){return typeof d=="number"&&(d={priority:d}),this[a].type(b,this.extend({fn:c,context:this},d)),this}}function d(a){return function(b,c){var d=this[a].types;return d&&(c?d[b]&&d[b].remove(c):delete d[b]),this}}function i(a){return this.plugins.getBy(a)}function j(){var a=arguments.length===1?i:g;return a.apply(this,arguments)}function k(a){return this.bind("ready",a)}function l(a,b){var c=this.listeners.types,d=c&&c[a];return d&&d.trigger(b),this}function m(a,b){var c=this.plugins.types,d=c&&c[a],e,f;return d&&(f=this.toArray(arguments,1),b=d.transform.apply(d,f)),b}function n(a,b){var c={template:a,data:b};return this.trigger("parseStart",c),a=c.template=this.parse("template",a,b,c),this.trigger("parseEnd",c),a}function o(a,b){return this.parseTemplate=n,this.initialized=!0,this.trigger("ready").unbind("ready"),typeof a=="undefined"?this:c.parseTemplate(a,b)}function q(b){function d(a,b){return d.parseTemplate(a,b)}var c={listeners:new a,plugins:new a};return a.extend(d,p,c,b),d}"use strict";var e=b("listeners"),f=d("listeners"),g=b("plugins"),h=d("plugins"),p={startToken:"{{",endToken:"}}",bind:e,plugin:j,ready:k,trigger:l,parse:m,parseTemplate:o,unbind:f,removePlugin:h,create:q,extend:a.extend,isArray:a.isArray,toArray:a.toArray};return q()}(b);a.tim=c})(window)